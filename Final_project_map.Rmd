---
title: "Group_3_final_project_map"
output: html_document
---


```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```


<!-- DMC - starting code for map -->


Including packages


```{r install_packages, eval=FALSE}

install.packages("utilsIPEA")
install.packages("rgdal")
install.packages("raster")
install.packages("tmaptools")
install.packages("mapshaper")
install.packages("tmap")
install.packages("leaflet")
install.packages("RColorBrewer")
install.packages("classint")
install.packages("dplyr")


```


```{r package, include=FALSE, eval=TRUE}

#install.packages("haven")
#install.packages("ggplot2")
#install.packages("foreign")
library ("haven")
#library("ggplot2")
library("foreign")

```



Bringing in data from Github

```{r data, include=FALSE}

link="https://github.com/quinhasf/pubpol-599/raw/master/ape_analysis.dta"
chw_fp <- read_dta(url(link))

```

<!-- Don't need this - we install before
```{r install_packages_2, eval=FALSE, include=FALSE}

install.packages("maptools")
library("maptools")

install.packages("sf")
library("sf")

```
-->


Bringing in map

```{r map, include=FALSE, eval=FALSE}
#DMC - using the zip file in the repository instead of the shape file
#maplink="https://github.com/ihsun-uw/Group3_Final_Project/raw/master/MOZ-level_1.shp"
#moz_map = st_read("/Users/david/Documents/GitHub/Group3_Final_Project/Mozambique shape maps")

zip_mozmap_SHP = "https://github.com/ihsun-uw/Group3_Final_Project/raw/master/Mozambique%20shape%20maps.zip"

```


```{r, eval=FALSE}
library(utils)
temp=tempfile()
download.file(zip_mozmap_SHP, temp)
unzip(temp)
```

To know what shapefiles are now in your directory:

```{r, eval=FALSE}
(maps=list.files(pattern = 'shp'))
```


You select which map from the object _maps_ you need:

```{r, eval=FALSE, results='hide', warning=FALSE,message=FALSE}
# notice the parameters use in the chunk!!

library(rgdal)
mozzipMap <- readOGR("MOZ-level_1.shp",stringsAsFactors=F) 
```

We have a map:

```{r, eval=FALSE}
plot(mozzipMap)

str(chw_fp$province)
#str(mozzipMap)
head(chw_fp$province, 10)
names(mozzipMap)
head(mozzipMap$CAPTION, 50)

str(mozzipMap$CAPTION)

mozzipMap$CAPTION=as.numeric(mozzipMap$CAPTION)


```

<!-- Generating the list of provinces and assigning a number
1: Cabo Delgado
2: Gaza
3: Inhambane
4: Manica
5: Maputo Provincia
6: Nampula
7: Niassa
8: Sofala
9: Tete
10: Zambezia
-->

```{r recoding_provinces, include=FALSE}

SchoolData$Grade[SchoolData$Grade==5] <- "Grade Five"

chw_fp$provnice_num <- chw_fp$province
chw_fp$provnice_num[chw_fp$provnice_num=="CABO DELGADO"] <- 1

```




```{r, eval=TRUE}
layerContrib=merge(mozzipMap,chw_fp, by.x='CAPTION', by.y='province',all.x=F)
```














```{r}
library(RColorBrewer)
colors <- brewer.pal(9, "BuGn")

```


```{r}
install.packages("ggmap")
library(ggplot2)
library(ggmap)
mapImage <- get_map(location = c(lon = -118, lat = 37.5),
  color = "color",
  source = "osm",
  # maptype = "terrain",
  zoom = 6)



```

